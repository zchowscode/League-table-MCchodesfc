<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ team.name }} - Team Page</title>
    <style>
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 5px; }
        input[type="text"] { width: 120px; }
        .lineup-input { width: 150px; }
        .button { padding: 5px 10px; margin: 2px; }
    </style>
</head>
<body>
    <h1>{{ team.name }} - Team Page</h1>

    <h2>Confirmed Lineups</h2>
    {% if team.confirmed_lineups %}
        <table>
            <tr>
                <th>Date</th>
                <th>Lineup</th>
                <th>Action</th>
            </tr>
            {% for cl in team.confirmed_lineups %}
                <tr>
                    <td>{{ cl.date }}</td>
                    <td>{{ cl.lineup | join(', ') }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('delete_lineup', team_name=team.name, lineup_date=cl.date) }}">
                            <button type="submit" class="button">Delete</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No confirmed lineups yet.</p>
    {% endif %}

    <h2>Update Temporary Lineup</h2>
    <form method="POST">
        <table>
            <tr>
                <th>Player Slot</th>
                <th>Player Name</th>
            </tr>
            {% for i in range(8) %}
                <tr>
                    <td>Player {{ i + 1 }}</td>
                    <td><input class="lineup-input" type="text" name="lineup" value="{{ team.lineup[i] if i < team.lineup|length else '' }}"></td>
                </tr>
            {% endfor %}
        </table>
        <p>
            Date: <input type="date" name="lineup_date" required>
        </p>
        <button type="submit" name="confirm" class="button">Confirm Lineup</button>
        <button type="submit" class="button">Update Temporary Lineup</button>
    </form>

    <h2>Matches</h2>
    {% if team.matches %}
        <table>
            <tr>
                <th>Date</th>
                <th>Opponent</th>
                <th>Goals</th>
                <th>Assists</th>
                <th>Opponent Goals</th>
            </tr>
            {% for m in team.matches %}
                <tr>
                    <td>{{ m.date }}</td>
                    <td>{{ m.opponent }}</td>
                    <td>{{ m.goals }}</td>
                    <td>{{ m.assists }}</td>
                    <td>{{ m.opponent_goals }}</td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No matches recorded.</p>
    {% endif %}

    <p><a href="{{ url_for('league_table') }}">â¬… Back to League Table</a></p>

    <h2>Player Stats</h2>
    <ul>
        {% for player in team.players %}
            <li><a href="{{ url_for('player_page', team_name=team.name, player_name=player.name) }}">{{ player.name }}</a> - Goals: {{ player.goals }}, Assists: {{ player.assists }}</li>
        {% endfor %}
    </ul>
</body>
</html>
