<body>
    <h1>Pending Update Requests</h1>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for message in messages %}
          <div style="color: #ff0; margin-bottom: 10px;">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% if requests %}
    <table>
        <tr>
            <th>User</th>
            <th>Type</th>
            <th>Team</th>
            <th>Player / Lineup</th>
            <th>Proposed Update</th>
            <th>Actions</th>
        </tr>

        {% for req in requests %}
        <tr>
            <td>{{ req.user }}</td>
            <td>{{ req.type }}</td>
            <td>{{ req.team }}</td>
            <td>{{ req.player or "Lineup" }}</td>
            <td>
                {% if req.type == 'lineup' %}
                    {{ req.lineup | join(', ') }}
                {% else %}
                    Goals: {{ req.goals }}, Assists: {{ req.assists }}
                {% endif %}
            </td>
            <td>
                <form action="{{ url_for('approve_request', request_id=req.id) }}" method="POST">
                    <input type="password" name="admin_password" placeholder="Admin Password" required>
                    <button type="submit" class="confirm-btn">Approve</button>
                </form>
                <form action="{{ url_for('deny_request', request_id=req.id) }}" method="POST">
                    <input type="password" name="admin_password" placeholder="Admin Password" required>
                    <button type="submit" class="deny-btn">Deny</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        <p>No pending requests.</p>
    {% endif %}
</body>
